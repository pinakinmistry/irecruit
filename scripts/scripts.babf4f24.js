"use strict";angular.module("irecruitApp",["ui.router","irecruit.candidate.controllers","irecruit.test.controllers","irecruit.commons.directives"]).config(["$stateProvider",function(a){a.state("candidate",{url:"/candidate",templateUrl:"scripts/candidate/candidate.html",controller:"CandidateCtrl"}).state("showCandidate",{url:"/candidate/:candidateId",templateUrl:"scripts/candidate/view-edit-candidate.html",controller:"ViewEditCandidateCtrl"}).state("test",{url:"/test",templateUrl:"scripts/test/test.html",controller:"TestCtrl"}).state("showTest",{url:"/test/:testId",templateUrl:"scripts/test/view-edit-test.html",controller:"ViewEditTestCtrl"}).state("enterTest",{url:"/entertest",templateUrl:"scripts/test/enter-test.html",controller:"EnterTestCtrl"}).state("enterTest.confirmCandidate",{url:"/confirmcandidate",templateUrl:"scripts/test/confirm-candidate.html"}).state("enterTest.beginTest",{url:"/begintest",templateUrl:"scripts/test/begin-test.html"}).state("evaluateTest",{url:"/evaluatetest/:candidateId/:testId",templateUrl:"scripts/test/evaluate-test.html",controller:"EvaluateTestCtrl"})}]).run(["$state",function(a){a.go("candidate")}]).constant("SKILLS",["Front end","Java","Scala"]).constant("QUESTION_TYPES",["Single Answer","Multiple Answers","Textual","Exercise"]),function(){angular.module("irecruit.candidate.controllers",["ui.router","news.candidate.services","news.test.services"]).controller("CandidateCtrl",["$scope","$state","Candidate","SKILLS",function(a,b,c,d){function e(){a.candidate.status="Just added",c.add(a.candidate),a.candidate={name:"",phone:"",email:"",skypeId:"",status:"",testsAssigned:[],testskeys:[]}}a.candidates=c.all,a.candidate={name:"",phone:"",email:"",skypeId:"",status:"",testsAssigned:[],testskeys:[]},a.addCandidate=e,a.skills=d}]).controller("ViewEditCandidateCtrl",["$scope","$state","$stateParams","Candidate","SKILLS","Test",function(a,b,c,d,e,f){function g(){a.candidate.testsAssigned.push(a.testAssigned),a.candidate.testskeys.push(a.testAssigned.testkey);var b=a.candidate.testsAssigned.length;a.candidate.status=b+" test"+(b>1?"s":"")+" assigned",a.testAssigned={}}function h(c){b.go("evaluateTest",{candidateId:a.candidate.name,testId:c})}a.candidate=d.all[c.candidateId],a.tests=f.all,a.testAssigned={},a.assignTest=g,a.evaluateTest=h,angular.forEach(a.candidate.testsAssigned,function(a){a.evaluated&&(a.score=_.filter(a.questions,function(a){return"correct"===a.evaluated}).length,a.score&&(a.score=Math.round(a.score/a.questions.length*100)))})}])}(),angular.module("news.candidate.services",[]).factory("Candidate",function(){var a=[{name:"Pinakin Mistry",phone:"9819515125",email:"pmistry@gmail.com",skypeId:"pmistry",skills:"Front end",status:"Just added",testsAssigned:[],testskeys:[]}],b={all:a,add:function(a){this.all.push(a)}};return b}),function(){angular.module("irecruit.test.controllers",["ui.router","news.test.services"]).controller("TestCtrl",["$scope","$state","Test","SKILLS",function(a,b,c,d){function e(){c.add(a.test),a.test={skills:"",name:"",creator:"",type:""},b.go("showTest",{testId:a.tests.length-1})}a.tests=c.all,a.test={skills:"",name:"",creator:"",type:""},a.addTest=e,a.skills=d}]).controller("ViewEditTestCtrl",["$scope","$state","$stateParams","Test","QUESTION_TYPES",function(a,b,c,d,e){function f(){a.question.options.push({text:a.option.text}),a.option.text="",a.$broadcast("newOptionAdded")}function g(b){a.question.options.splice(b,1)}function h(){a.test.questions.push(a.question),a.question={options:[]},d.all[c.testId]=a.test}a.test=d.all[c.testId],a.questionTypes=e,a.test.questions=a.test.questions||[],a.question={options:[]},a.option={text:""},a.addOption=f,a.deleteOption=g,a.addQuestion=h}]).controller("EnterTestCtrl",["$scope","Candidate","$state","$stateParams","$rootScope",function(a,b,c,d,e){function f(){a.appearingCandidate=_.find(b.all,function(b){return _.contains(b.testskeys,a.testkey)}),c.go("enterTest.confirmCandidate")}function g(){a.test=_.find(a.appearingCandidate.testsAssigned,function(b){return b.testkey===a.testkey}),a.test.started=!0,c.go("enterTest.beginTest")}function h(){a.test.status="Answers submitted",a.test.started=!1,e.testEntered=!1,c.go("candidate")}a.enterTest=f,a.beginTest=g,e.testEntered=!0,a.submitAnswers=h}]).controller("EvaluateTestCtrl",["$scope","$state","$stateParams","Candidate",function(a,b,c,d){a.candidate=_.find(d.all,function(a){return a.name===c.candidateId}),a.test=a.candidate.testsAssigned[c.testId],a.test.evaluation=!0}])}(),angular.module("news.test.services",[]).factory("Test",function(){var a=[{skills:"Front end",name:"HTML, CSS, JavaScript v1",creator:"Ashish Juyal",type:"Initial screening",questions:[{type:"Single Answer",text:"Q1",options:[{text:"o1"},{text:"o2"},{text:"o3"}]},{type:"Multiple Answers",text:"Q2",options:[{text:"a1"},{text:"b2"},{text:"c3"}]},{type:"Single Answer",text:"Q3",options:[{text:"x1"},{text:"x2"},{text:"x3"}]},{type:"Multiple Answers",text:"Q4",options:[{text:"y1"},{text:"y2"},{text:"y3"}]},{type:"Textual",text:"T1"},{type:"Exercise",text:"Exercise 1"}]},{skills:"Front end",name:"HTML, CSS, JavaScript v2",creator:"Abhinav Kumar",type:"Tech round"}],b={all:a,add:function(a){this.all.push(a)}};return b}),function(){angular.module("irecruit.commons.directives",[]).directive("focusOn",function(){return function(a,b,c){a.$on(c.focusOn,function(){b[0].focus()})}}).directive("testRunner",["$sce",function($sce){return{templateUrl:"scripts/test/test-runner.html",restrict:"E",scope:{test:"=",submitAnswers:"&"},link:function postLink(scope,element,attrs){function nextQuestion(){scope.currentQuestion<scope.test.questions.length-1&&(scope.currentQuestion=scope.currentQuestion+1)}function prevQuestion(){scope.currentQuestion>0&&(scope.currentQuestion=scope.currentQuestion-1)}function runCode(){var code=$sce.trustAsJs(scope.test.questions[scope.currentQuestion].content);scope.codeOutput=eval("("+code+")")}function answerEvaluatedAs(a){scope.test.questions[scope.currentQuestion].evaluated=a}function evaluationDone(){scope.test.status="Evaluated",scope.test.evaluated=!0}scope.currentQuestion=0,scope.nextQuestion=nextQuestion,scope.prevQuestion=prevQuestion,scope.runCode=runCode,scope.answerEvaluatedAs=answerEvaluatedAs,scope.evaluationDone=evaluationDone}}}]).directive("contenteditable",function(){return{require:"ngModel",link:function(a,b,c,d){b.bind("blur",function(){a.$apply(function(){d.$setViewValue(b.html())})}),d.$render=function(){b.html(d.$viewValue)}}}})}();